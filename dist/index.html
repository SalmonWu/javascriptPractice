<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="stylesheet/style.css">
	<title>Hello World!</title>
</head>

<body>
	<script>
		//變數提升
		// console.log(a); //undefined
		// var a = 1; 
		//----------------------------------

		// var a;
		// console.log(a); //undefined
		// a = 1;
		//==================================//

		//物件引用
		// var o1 = {};
		// var o2 = o1;

		// o1.a = 1;
		// console.log( o2.a ) // 1

		// o2.b = 2;
		// console.log( o1.b ) // 2
		//----------------------------------

		// var o1 = {};
		// var o2 = o1;

		// o1 = 1;
		// console.log( o2 ) // {}
		//==================================//

		//函式作用域
		// var v = 1;

		// function f(){
		// console.log(v); // 1
		// }

		// f()
		//----------------------------------

		// function f(){
		// 	var v = 1;
		// }

		// console.log(v) // ReferenceError: v is not defined
		//----------------------------------

		// var v = 1;

		// function f(){
		// var v = 2;
		// console.log(v);
		// }

		// f() // 2
		// console.log(v) // 1
		//==================================//

		//函式內容變數提升
		// var x = 100;

		// function foo() {
		// 	console.log(x);
		// 	var x = 0;
		// }
		// foo();// undefined
		//==================================//

		//函数本身的作用域
		// var a = 1;
		// var x = function () {
		// console.log(a);
		// };

		// function f() {
		// var a = 2;
		// x();
		// }

		// f() // 1

		//==================================//

		//閉包
		// function f1() {
		// 	var n = 999;
		// }

		// console.log(n); // Uncaught ReferenceError: n is not defined
		//----------------------------------

		// function Person(name) {
		// 	var _age;
		// 	function setAge(n) {
		// 		_age = n;
		// 	}
		// 	function getAge() {
		// 		return _age;
		// 	}

		// 	return {
		// 		name: name,
		// 		getAge: getAge,
		// 		setAge: setAge
		// 	};
		// }

		// var p1 = Person('张三');
		// p1.setAge(25);
		// p1.getAge();
		// console.log(p1['年齡']()); // 25
		//==================================//

		//立即调用的函数表达式
		// 写法一
		// var tmp = newData;
		// processData(tmp);
		// storeData(tmp);

		// 写法二
		// (function (){
		// var tmp = newData;
		// processData(tmp);
		// storeData(tmp);
		// }());
		//==================================//

		//构造函数
		// var Vehicle = function () {
		// 	this.price = 1000;
		// };

		//new 命令 
		// var Vehicle = function (){
		// 	this.price = 1000;
		// };

		// var v = new Vehicle();
		// v.price // 1000
		//----------------------------------

		// var Vehicle = function (p) {
		// 	this.price = p;
		// };

		// var v = new Vehicle(500);
		//----------------------------------

		// var Vehicle = function (){
		// 	this.price = 1000;
		// };

		// var v = new Vehicle();
		// price // 1000
		// v.price // Uncaught TypeError: Cannot read property 'price' of undefined

		//----------------------------------

		// function Fubar(foo, bar){
		// 	'use strict';
		// 	this._foo = foo;
		// 	this._bar = bar;
		// }

		// Fubar()
		// // TypeError: Cannot set property '_foo' of undefined
		//----------------------------------

		//构造函数的缺点

		// function Cat (name, color) {
		// 	this.name = name;
		// 	this.color = color;
		// }

		// var cat1 = new Cat('大毛', '白色');

		// cat1.name // '大毛'
		// cat1.color // '白色'
		//----------------------------------

		// function Cat(name, color) {
		// 	this.name = name;
		// 	this.color = color;
		// 	this.meow = function () {
		// 		console.log('mew, mew, mew...');
		// 	};
		// }

		// var cat1 = new Cat('大毛', '白色');
		// var cat2 = new Cat('二毛', '黑色');

		// console.log(cat1.meow === cat2.meow); // false
		//----------------------------------

		//prototype属性的作用 & 原型链
		// function Animal (name) {
		// 	this.name = name;
		// }

		// Animal.prototype.color = 'white';

		// var cat1 = new Animal('大毛');
		// var cat2 = new Animal('二毛');

		// console.log(cat1.color) // 'white'
		// console.log(cat2.color) // 'white'

		//----------------------------------

		//this關鍵字

		// var person = {
		// 	name: 'Jive',
		// 	describe: function () {
		// 		return 'Name: '+ this.name;
		// 	}
		// };

		// console.log(person.describe())// "Name: Jive"
		//----------------------------------

		// var A = {
		// 	name: 'Jive',
		// 	describe: function () {
		// 		return 'Name: '+ this.name;
		// 	}
		// };

		// var B = {
		// 	name: 'James'
		// };

		// B.describe = A.describe;
		// console.log(B.describe());// "Name: James"
		//----------------------------------

		// function f() {
		// 	return '姓名：'+ this.name;
		// }

		// var A = {
		// 	name: '张三',
		// 	describe: f
		// };

		// var B = {
		// 	name: '李四',
		// 	describe: f
		// };

		// console.log(A.describe()) // "姓名：张三"
		// console.log(B.describe()) // "姓名：李四"
		//----------------------------------

		//this 使用情境

		//全局环境
		// console.log(this === window); // true

		//构造函数
		// var Obj = function (p) {
		// 	this.p = p;
		// };

		// Obj.prototype.m = function() {
		// 	return this.p;
		// };

		// var o = new Obj('Hello World!');

		// console.log(o.p) // "Hello World!"
		// console.log(o.m()) // "Hello World!"

		//对象的方法
		// var obj ={
		// 	foo: function () {
		// 		console.log(this);
		// 	}
		// };

		// obj.foo() // obj

		//使用注意点
		// var o = {
		// f1: function () {
		// 	console.log(this);
		// 	var f2 = function () {
		// 		console.log(this);
		// 	}();
		// }
		// }

		// o.f1()
		// Object
		// Window
		//----------------------------------

		// var o = {
		// f1: function() {
		// 	console.log(this);
		// 	var self = this;
		// 	var f2 = function() {
		// 		console.log(self);
		// 	}();
		// }
		// }

		// o.f1()
		// Object //** f1
		// Object //** f1
		//----------------------------------

		// var counter = {
		// 	count: 0
		// };
		// counter.inc = function () {
		// 	'use strict';
		// 	this.count++
		// };
		// var f = counter.inc;
		// f()
		// TypeError: Cannot read property 'count' of undefined
		//----------------------------------

		//绑定 this 的方法：call、apply、bind

		//function.prototype.call()
		//----------------------------------

		// var obj = {};

		// var f = function () {
		// 	return this;
		// };

		// console.log(f() === window); //true
		// console.log(f.call(obj) === obj); //true
		//----------------------------------

		// var n = 123;
		// var obj = { n: 456 };

		// function a() {
		// 	console.log(this.n);
		// }

		// a.call() // 123
		// a.call(null) // 123
		// a.call(undefined) // 123
		// a.call(window) // 123
		// a.call(obj) // 456
		//----------------------------------

		// function add(a, b) {
		// 	return a + b;
		// }

		// console.log(add.call(this, 1, 2)) // 3
		//----------------------------------

		//function.prototype.apply()
		//----------------------------------

		// function f(x,y){
		// 	console.log(x+y);
		// }
		// console.log(f.call(null,1,1)); // 2
		// console.log(f.apply(null,[1,1])) // 2
		//----------------------------------

		// function.prototype.bind()
		//----------------------------------

		// var counter = {
		// 	count: 0,
		// 	inc: function () {
		// 		this.count++;
		// 	}
		// };

		// console.log( counter.count ); // 0
		// counter.inc()
		// console.log( counter.count ); // 1
		//----------------------------------

		// var counter = {
		// count: 0,
		// inc: function () {
		// 		this.count++;
		// 	}
		// };

		// var func = counter.inc;
		// func();
		// console.log( counter.count );// 0
		// console.log( count );// NaN
		//----------------------------------

		// var counter = {
		// count: 0,
		// inc: function () {
		// 	this.count++;
		// 	}
		// };

		// var func = counter.inc.bind(counter);
		// func();
		// console.log( counter.count );// 1
		//----------------------------------

		// var counter = {
		// 	count: 0,
		// 	inc: function () {
		// 		this.count++;
		// 	}
		// };

		// var obj = {
		// 	count: 100,
		// 	inc: function () {
		// 		this.count+2;
		// 	}
		// };

		// var func = counter.inc.bind( obj );
		// func();
		// console.log( obj.count );// 1 **//101
		//----------------------------------

		// var add = function (x, y) {
		// 	return x * this.m + y * this.n;
		// }

		// var obj = {
		// 	m: 2,
		// 	n: 2
		// };

		// var newAdd = add.bind(obj, 5);

		// console.log( newAdd(4) ) // 18;
		//----------------------------------

		// var counter = {
		// 	count: 0,
		// 	inc: function () {
		// 		'use strict';
		// 		this.count++;
		// }
		// };

		// function callIt(callback) {
		// 	callback();
		// }

		// callIt(counter.inc)
		// TypeError: Cannot read property 'count' of undefined
		//----------------------------------

		// var counter = {
		// 	count: 0,
		// 	inc: function () {
		// 		'use strict';
		// 		this.count++;
		// 	}
		// };

		// function callIt(callback) {
		// 	callback();
		// }

		// callIt(counter.inc.bind(counter));
		// console.log( counter.count ) // 1
		//----------------------------------

		var obj = {
			name: 'Jive',
			times: [1, 2, 3],
			print: function () {
				this.times.forEach(function (n) {
				console.log(this.name);
				console.log(this === window);
				});
			}
		};

		obj.print()
		// ''
		// true
		// ''
		// true
		// ''
		// true



	</script>
</body>

</html>